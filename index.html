<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KKMassage | ㅋㅋ마사지 스파</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- 상단 배너 -->
  <header class="banner">
    <div class="banner-overlay">
      <div class="banner-content">
        <h1 class="site-title">KKMassage | ㅋㅋ마사지 스파</h1>
        <p class="site-subtitle">고급스럽고 프라이빗하며 전문적인 출장마사지 방문 서비스</p>
        <a class="btn-primary" href="about.html">자세히 보기</a>
      </div>
    </div>
    <img class="banner-img" src="images/banner.jpg" alt="출장마사지 배너" />
  </header>

  <main class="container">
    <!-- 서비스 섹션 -->
    <section id="services" class="services">
      <h2 class="section-title">서비스 항목</h2>
      <div class="service-grid">
        <article class="service-item">
          <img class="service-image" src="images/service1.jpg" alt="전신 릴랙스 마사지" />
          <h3>전신 릴랙스 마사지</h3>
          <p>전통 기법과 최신 테라피를 결합하여 피로와 근육 통증을 완화합니다.</p>
        </article>

        <article class="service-item">
          <img class="service-image" src="images/service2.jpg" alt="아로마 오일 마사지" />
          <h3>아로마 오일 마사지</h3>
          <p>고급 아로마 오일을 사용하여 긴장을 풀어주고 숙면과 혈액순환을 도와드립니다.</p>
        </article>

        <article class="service-item">
          <img class="service-image" src="images/service3.jpg" alt="딥티슈 마사지" />
          <h3>딥티슈 마사지</h3>
          <p>깊은 근육층을 대상으로 한 전문적인 테크닉으로 장기 피로 회복과 운동 후 케어에 적합합니다.</p>
        </article>
      </div>
    </section>

    <!-- 예약 섹션: 폼 + 간단 안내 -->
    <section id="booking" class="booking">
      <h2 class="section-title">예약 신청</h2>
      <p>아래 폼으로 전화번호 및 카카오톡 아이디를 남겨 주세요. (폼 제출 시 기본 메일 프로그램이 열려 예약 내용이 전송됩니다.)</p>

      <form id="bookingForm" class="booking-form" onsubmit="return handleBookingSubmit(event)">
        <label>
          이름
          <input type="text" name="name" id="bk_name" placeholder="이름을 입력하세요" required />
        </label>

        <label>
          연락처 (전화번호)
          <input type="tel" name="phone" id="bk_phone" placeholder="예: 010-1234-5678" required pattern="[\d\-\+\s]+" />
        </label>

        <label>
          카카오톡 ID
          <input type="text" name="kakao" id="bk_kakao" placeholder="카카오톡 아이디를 입력하세요" />
        </label>

        <label>
          희망 방문 일시
          <input type="datetime-local" name="datetime" id="bk_datetime" />
        </label>

        <label>
          요청 사항 / 메모
          <textarea name="message" id="bk_message" rows="4" placeholder="요청 사항을 입력하세요 (선택)"></textarea>
        </label>

        <div class="form-actions">
          <button type="submit" class="btn-primary">예약 신청 보내기</button>
          <button type="button" class="btn-secondary" onclick="clearBookingForm()">초기화</button>
        </div>

        <p class="note">참고: 모든 방문 서비스는 통칭하여 "출장마사지"로 표기됩니다.</p>
      </form>

      <div id="bookingResult" class="booking-result" aria-live="polite" hidden></div>
    </section>

    <!-- 연락처 및 지도 -->
    <section id="contact" class="contact">
      <h2 class="section-title">예약 및 연락처</h2>
      <p>전화 / 카카오톡: <a class="phone-link" id="phoneDisplay" href="tel:+821012345678">010-1234-5678</a></p>

      <!-- 구글 맵 -->
      <div class="map-wrap">
        <iframe
          id="gmap"
          title="매장 위치"
          src="https://www.google.com/maps?q=Seoul+Gangnam+Station&output=embed"
          allowfullscreen
          loading="lazy"
        ></iframe>
      </div>
    </section>
  </main>

  <!-- 푸터 -->
  <footer class="site-footer">
    <nav>
      <a href="index.html">홈</a> ·
      <a href="about.html">회사 소개</a>
    </nav>
    <p>© <span id="year"></span> KKMassage | ㅋㅋ마사지 스파</p>
  </footer>

  <!-- 오른쪽 하단 고정: 전화 아이콘 (클릭 시 전화걸기) -->
  <a id="callButton" class="call-button" href="tel:+821012345678" aria-label="전화 걸기">
    <!-- 간단한 폰 아이콘 SVG -->
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.86 19.86 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.86 19.86 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.12 1.05.36 2.08.72 3.05a2 2 0 0 1-.45 2.11L8.09 10.91a16 16 0 0 0 6 6l1.03-1.33a2 2 0 0 1 2.11-.45c.97.36 2 .6 3.05.72A2 2 0 0 1 22 16.92z" fill="#fff"/>
    </svg>
  </a>

  <script>
    // 자동으로 연도 표시
    document.getElementById('year').textContent = new Date().getFullYear();

    // 폼 제출 처리: mailto: 방식으로 메일을 여는 간단 구현
    function handleBookingSubmit(e) {
      e.preventDefault();

      const name = document.getElementById('bk_name').value.trim();
      const phone = document.getElementById('bk_phone').value.trim();
      const kakao = document.getElementById('bk_kakao').value.trim();
      const datetime = document.getElementById('bk_datetime').value;
      const message = document.getElementById('bk_message').value.trim();

      // 기본 유효성: 전화번호와 이름 필요
      if (!name || !phone) {
        showResult('이름과 전화번호를 입력해 주세요.', true);
        return false;
      }

      // mailto: 링크 생성 — 수신 이메일
      const recipient = 'reservations@example.com';
      const subject = encodeURIComponent('[출장마사지 예약] ' + name);
      let bodyText = '';
      bodyText += '이름: ' + name + '\\n';
      bodyText += '전화번호: ' + phone + '\\n';
      bodyText += '카카오톡 ID: ' + (kakao || '-') + '\\n';
      bodyText += '희망 방문 일시: ' + (datetime || '-') + '\\n';
      bodyText += '요청 사항: ' + (message || '-') + '\\n';
      bodyText += '\\n--\\n(이 메일은 웹 예약 폼을 통해 자동 생성되었습니다)';

      const mailto = `mailto:${recipient}?subject=${subject}&body=${encodeURIComponent(bodyText)}`;

      // 시도: 메일 클라이언트 열기
      window.location.href = mailto;

      showResult('메일 클라이언트가 열리면 보내기 버튼을 눌러 예약 요청을 전송해 주세요. (이후 고객센터에서 확인하여 연락드립니다.)', false);
      return false;
    }

    function showResult(text, isError) {
      const el = document.getElementById('bookingResult');
      el.hidden = false;
      el.textContent = text;
      el.style.color = isError ? '#c0392b' : '#1a7f37';
      setTimeout(() => { el.hidden = true; }, 8000);
    }

    function clearBookingForm() {
      document.getElementById('bookingForm').reset();
    }
  </script>
</body>
</html>
