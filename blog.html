<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>블로그 - KKMassage | ㅋㅋ마사지</title>
    <link rel="stylesheet" href="style.css"/>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container container">
            <div class="logo">KKMassage | ㅋㅋ마사지</div>
            <ul class="nav-menu">
                <li><a href="index.html">홈</a></li>
                <li><a href="about.html">회사소개</a></li>
                <li><a href="regions.html">지역선택</a></li>
                <li><a href="blog.html" class="active">블로그</a></li>
                <li><a href="index.html#contact">예약</a></li>
            </ul>
        </div>
    </nav>

    <section class="about-hero">
        <div class="container">
            <h1>블로그</h1>
            <p class="lead">지역별 기사와 팁을 확인하세요</p>
        </div>
    </section>

    <main class="container services" id="blogContent"></main>

    <footer class="footer">
        <div class="footer-content container">
            <p>&copy; <span id="year"></span> KKMassage | ㅋㅋ마사지. 모든 권리 보유.</p>
            <nav class="footer-nav">
                <a href="index.html">홈</a>
                <a href="about.html">회사소개</a>
                <a href="regions.html">지역선택</a>
                <a href="blog.html">블로그</a>
                <a href="index.html#contact">예약</a>
            </nav>
        </div>
    </footer>

    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        const blogData = {
            "서울특별시": {
                "강남구": [
                    { id: 'seoul_gangnam_1', title: '강남구 최고의 출장 마사지 팁', excerpt: '강남구에서 만족도가 높은 마사지 업체 추천 및 예약 요령', content: '<p>강남구 상세 글 내용: 바쁜 일상 속에서 출장 마사지가 필수입니다. 우리 서비스는 개인 맞춤 케어를 제공합니다.</p><p>예약 전 팁: 가능한 시간대, 준비물 안내 등.</p>' },
                    { id: 'seoul_gangnam_2', title: '강남 힐링 스팟 소개', excerpt: '마사지 받기 전 힐링 할 만한 장소', content: '<p>강남 힐링 스팟 상세: 카페, 공원 등 추천.</p>' }
                ],
                "종로구": [
                    { id: 'seoul_jongro_1', title: '종로구 출장 마사지 가이드', excerpt: '종로구 상권 특성에 맞춘 서비스 팁', content: '<p>종로구 상세 내용: 역사적인 지역에서 편안한 마사지 팁.</p>' }
                ]
            },
            "부산광역시": {
                "해운대구": [
                    { id: 'busan_haeundae_1', title: '해운대 바닷가 후 마사지', excerpt: '해운대의 추천 마사지 코스', content: '<p>해운대 상세 내용: 바다 전망과 함께 힐링하는 방법.</p>' }
                ]
            }
        };

        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                province: params.get('province'),
                district: params.get('district'),
                post: params.get('post')
            };
        }

        function renderBlog() {
            const { province, district, post } = getQueryParams();
            const container = document.getElementById('blogContent');
            container.innerHTML = '';

            if (!province || !district) {
                container.innerHTML = '<h2 class="section-title">최근 글들</h2><p class="section-intro">지역을 선택하거나 <a href="regions.html">지역선택</a>에서 이동하세요.</p>';
                for (const prov in blogData) {
                    for (const dist in blogData[prov]) {
                        blogData[prov][dist].forEach(item => {
                            const card = document.createElement('div');
                            card.className = 'service-item';
                            card.innerHTML = '<div class="service-content"><h3>' + item.title + '</h3><p class="service-desc">' + item.excerpt + ' (' + prov + ' > ' + dist + ')</p><a class="cta-button" href="blog.html?province=' + encodeURIComponent(prov) + '&district=' + encodeURIComponent(dist) + '&post=' + encodeURIComponent(item.id) + '" style="margin-top:12px;display:inline-block;">읽어보기</a></div>';
                            container.appendChild(card);
                        });
                    }
                }
                return;
            }

            const posts = (blogData[province] && blogData[province][district]) ? blogData[province][district] : [];

            if (post) {
                const selectedPost = posts.find(p => p.id === post);
                if (selectedPost) {
                    container.innerHTML = '<article class="about-main"><h2 class="section-title">' + selectedPost.title + '</h2><p class="lead">' + province + ' &gt; ' + district + '</p><div class="about-text">' + selectedPost.content + '</div><p style="margin-top:18px;"><a class="cta-button" href="blog.html?province=' + encodeURIComponent(province) + '&district=' + encodeURIComponent(district) + '">목록으로 돌아가기</a></p></article>';
                } else {
                    container.innerHTML = '<p class="blog-no-posts">요청하신 글을 찾을 수 없습니다.</p>';
                }
                return;
            }

            container.innerHTML = '<h2 class="section-title">' + province + ' &gt; ' + district + ' 글 목록</h2><p class="section-intro">해당 지역의 관련 글들을 확인하세요.</p>';
            if (posts.length === 0) {
                container.innerHTML += '<p class="blog-no-posts">해당 지역에 게시물이 없습니다. 더 많은 콘텐츠를 기대해주세요!</p>';
                return;
            }
            posts.forEach(item => {
                const card = document.createElement('div');
                card.className = 'service-item';
                card.innerHTML = '<div class="service-content"><h3>' + item.title + '</h3><p class="service-desc">' + item.excerpt + '</p><a class="cta-button" href="blog.html?province=' + encodeURIComponent(province) + '&district=' + encodeURIComponent(district) + '&post=' + encodeURIComponent(item.id) + '" style="margin-top:12px;display:inline-block;">읽어보기</a></div>';
                container.appendChild(card);
            });
        }

        renderBlog();
    </script>
</body>
</html>
